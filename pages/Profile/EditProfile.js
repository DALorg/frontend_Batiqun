import { useState } from "react";
import { useDispatch, useSelector } from "react-redux"
import Swal from "sweetalert2";
import "../components/GlobalVariable";
import {requireAuthentication} from "../requireAuthentication"
import Navsidebar from "../components/Navsidebar";

const EditProfile = () => {
    const dispatch = useDispatch();
    const allProfileData = useSelector((state) => state.Profile);
    // const { loading, error, profile } = allProfileData;

    //HANDLE CHANGE 
    const handleChange = (e) => {
        let data = { ...userInput };
        data[e.target.name] = e.target.value;
        setUserInput(data);
    };

    //INPUT DATA
    const [userInput, setUserInput] = useState({
        picture:"",
        username:"",
        email:"",
        bio:"",
        token:"",
    });

    const handleSubmit = (e) => {
        e.preventDefault();
        if (
            (userInput.picture === "",
            userInput.username === "",
            userInput.email === "",
            userInput.username === "",
            userInput.bio === "",
            userInput.token === "")
            ) {
                return false;
            }
            dispatch(
                addUsers({
                    picture: userInput.picture,
                    username: userInput.username,
                    email: userInput.email,
                    bio: userInput.bio,
                    token: userInput.token,
                })
            );
            Swal.fire(
                "Profile Berhasil Disimpan",
                "success"
            );

            setUserInput({
                picture:"",
                username:"",
                email:"",
                bio:"",
                token:"",
            });
        };

    return (
        <div className="container-fluid py-4">
        <title>Profile</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/icon.png" />
        <Navsidebar/>

      <div className="row">
        <div className="col-12">
          <div className="card mb-4">
            <div className="card-header pb-0">
              <div className="row">
                <div className="col-6 d-flex align-items-center">
                  <h6 className="mb-0">Profile Setting</h6>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

        <div class="col-xl-8 order-xl-1">
          <div class="card">
            <div class="card-header">
              <div class="row align-items-center">
                <div class="col-8">
                  <h3 class="mb-0">Edit profile </h3>
                </div>
              </div>
            </div>
            <div class="card-body">
              <form>
                {/* <h6 class="heading-small text-muted mb-4">User information</h6> */}
                <div class="pl-lg-4">
                <div class="row">
                    <div class="col-lg-6">
                      <div class="form-group">
                        <label class="form-control-label" for="input-first-name">First name</label>
                        <input type="text" id="input-first-name" 
                        class="form-control" placeholder="First name" 
                        value="Lucky"/>
                      </div>
                    </div>
                    <div class="col-lg-6">
                      <div class="form-group">
                        <label class="form-control-label" for="input-last-name">Last name</label>
                        <input type="text" id="input-last-name" 
                        class="form-control" placeholder="Last name" 
                        value="Jesse"/>
                      </div>
                    </div>
                </div>
                  <div class="row">
                    <div class="col-lg-6">
                      <div class="form-group">
                        <label class="form-control-label" for="input-username">Username</label>
                        <input
                        type="input"
                        class="form-control"
                        placeholder="enter username"
                        name="username"
                        onChange={handleChange}
                        value={userInput.username}
                      />
                      </div>
                    </div>
                    <div class="col-lg-6">
                      <div class="form-group">
                        <label class="form-control-label" for="input-email">Email address</label>
                        <input
                        type="input"
                        class="form-control"
                        placeholder="enter email"
                        name="email"
                        onChange={handleChange}
                        value={userInput.email}
                      />
                      </div>
                    </div>
                  </div> 
                </div>
                
                <hr class="my-4" />
                {/* <!-- Description --> */}
                <div class="pl-lg-4">
                  <div class="form-group">
                    <label class="form-control-label">Bio</label>
                    <textarea maxLength="100"
                        type="input"
                        class="form-control"
                        placeholder="Tell your description!"
                        name="bio"
                        onChange={handleChange}
                        value={userInput.bio}
                      />
                  </div>
                </div>
              </form>
            </div>
            </div>
            </div>
          </div>
        )
    }

    export default EditProfile;

    export const getServerSideProps = requireAuthentication(context => {
      return {props: {}}
  })